@model PocketMoney.Data.IUser
@{
    ViewBag.Title = "Семья";
}
<script type="text/x-jquery-tmpl" id="userRowTemplate">
    <tr>
        <td>${UserName}
    </td>
        <td style="text-align: center;">${Points}
    </td>
        <td style="text-align: center;">
            <input type="hidden" value="${UserId}" />
            <a href="#" id="actionView">Отчет</a>
            <a href="#" id="actionEdit">Редактировать</a>
            <a href="#" id="actionRemove">Удалить</a>
            <a href="#" id="actionExchange">Списать баллы</a>
        </td>
    </tr>
</script>

<script type="text/x-jquery-tmpl" id="vkRowTemplate">
<tr>
    <td>
        <img src="${Photo}" />
    </td>
    <td>
        ${FirstName} ${LastName}
    </td>
    <td>
        <input name="hiddenSelectedUserId" type="hidden" value="${UserId}" />
        <a href="#" class="actionSelectUser">Выбрать пользователя</a>
    </td>
</tr>
</script>
<section id="areaTable" class="wizard">
    <hgroup class="title">
        <h1>@ViewBag.Title.</h1>
        <h2>Учетные записи семьи.</h2>
    </hgroup>
    <input id="actionAdd" type="button" value="Добавить пользователя" />
    <table id="tableUsers" style="width: 100%;">
        <thead>
            <tr>
                <th>Имя пользователя
                </th>
                <th>Текущий балл
                </th>
                <th>Действия
                </th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</section>

<section id="areaAdd" class="wizard" style="display: none">
    <hgroup class="title">
        <h1>@ViewBag.Title.</h1>
        <h2>Добавить учетную запись</h2>
    </hgroup>
    <fieldset>
        <legend>Форма регистрации</legend>
        <ol>
            <li>
                <label>Тип учетной записи</label>
                <div id="ParentRole" class="cursor-pointer">
                    <input name="RoleType" type="radio" value="0x2" />Тот кто назначает задания (Взрослый)
                </div>
                <div id="ChildRole" class="cursor-pointer">
                    <input name="RoleType" type="radio" value="0x1" checked="checked" />Тот кто выполняет задания (Ребенок)
                </div>
            </li>
            <li class="ChildVisible">
                <label>Тип клиента</label>
                <input id="VKClient" name="ClientType" type="radio" value="VK" checked="checked" />ВКонтакте<br />
                <input id="PhoneClient" name="ClientType" type="radio" value="Phone" disabled="disabled" />Мобильный клиент
            </li>
            <li>
                <label for="UserName">Имя:</label>
                <input id="UserName" name="UserName" type="text" value="" />
            </li>
            <li class="ParentVisible">
                <label for="Email">Email:</label>
                <input id="Email" name="Email" type="text" value="" />
            </li>
            <li class="ChildVisible">
                <label for="VKQueryString">Введите идентификатор или URL пользователя в ВКонтакте:</label>
                <table border="0">
                    <tr>
                        <td>
                            <input id="VKQueryString" name="VKQueryString" type="text" />
                        </td>
                        <td>
                            <button id="actionSearchInVK" type="button">Искать</button>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <table id="tableVK">
                            </table>
                        </td>
                    </tr>
                </table>
            </li>
        </ol>
        <input id="actionSendInvite" type="button" value="Выслать уведомление для приглашения в систему" disabled="disabled" />

        <input id="actionCancelAdd" type="button" value="Отмена" />
    </fieldset>
</section>

@section Scripts {
    @Scripts.Render("~/bundles/family")

    <script type="text/javascript">
        (function () {
            var exports = this;
            $(document).ready(function ($) {
                exports.FamilyController.init({
                    el: $('body'),
                    settings: {
                        GetUsersUrl: '@Url.Action("GetUsers")',
                        GetUserVKUrl: '@Url.Action("GetUserVK")',
                        SearchUsersVKUrl: '@Url.Action("SearchUsersVK")'
                    },
                });
            });
        }).call(this);

    </script>
}
